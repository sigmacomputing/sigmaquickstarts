author: pballai
id: administration_metrics
summary: administration_metrics
categories: administration
environments: web
status: Published
feedback link: https://github.com/sigmacomputing/sigmaquickstarts/issues
tags: Getting Started, Metrics, Analytics, Data Engineering, BI, Business Intelligence, Sigma, Sigma Computing, Snowflake, Dashboarding, Visualization, Analysis, Excel, Spreadsheet, Embedding
lastUpdated: 2023-03-24

# Working with Metrics
<!-- The above name is what appears on the website and is searchable. -->

## Overview 
Duration: 5 

This QuickStart **(QS)** discusses and demonstrates how to use Sigma Metrics against a use case we will detail later on.

Metrics in bi (business intelligence) refer to the quantitative measurements used to evaluate and analyze the performance of a business. These metrics are calculation that are used to support a variety of use cases including financial performance, customer behavior, operational efficiency, and more.

Examples of common metrics used in business intelligence include:

<ul>
      <li><strong>Revenue:</strong> track the total income generated by a business over a period of time.</li>
      <li><strong>Customer retention:</strong> measures the percentage of customers who continue to use a business's products or services over time.</li>
      <li><strong>Net Promoter Score (NPS):</strong> gauges customer satisfaction and loyalty by asking customers how likely they are to recommend a business to others.</li>
      <li><strong>Conversion rate:</strong> measures the percentage of website visitors who complete a desired action, such as making a purchase or filling out a form.</li>
      <li><strong>Cost per acquisition (CPA):</strong> calculates the cost of acquiring a new customer.</li>
      <li><strong>Return on Investment (ROI):</strong> calculates the financial return on a particular investment, such as a marketing campaign or product development initiative.</li>
</ul>

By tracking and analyzing these metrics, businesses can gain valuable insights into their performance and make data-driven decisions to improve their operations, better serve their customers, and increase their profitability.

Metrics in Sigma provide a way to ensure consistent metric logic across tables, visualizations, and pivot tables. 

**Metrics help avoid:**<br>

Inconsistent analysis:<br>
Analysts can define calculations differently. For example, one may define revenue as the `sum of [Sales Price]`, where another may define it as the `sum of [Sales Price] - [Discount]`. These differences lead to inconsistent results and a lack of trust in the data. 

Repetitive work:<br>
Common business logic for a calculation like profit margin needs to be used all over the place. Today in Sigma, analysts have to derive the definition from scratch in every new workbook. This is a lot of repetitive, tedious work.

**Benefits of using metrics include:**<br>
Promote accurate, consistent, and governed analysis amongst all your `analysts`.

Incorporate common business calculations into your `business users` without having to derive them yourself.

<ul>
      <li>Define once, reuse everywhere.</li>
      <li>Full power of Sigma’s formula language</li>
      <li>Referential integrity: Change the definition in one place, it updates everywhere</li>
      <li>Granular access control through dataset permissions</li>
</ul>

### Target Audience
Anyone who is trying to create content in Sigma and those interested in governing the calculations that are being used.

### Prerequisites

<ul>
  <li>A computer with a current browser. It does not matter which browser you want to use.</li>
  <li>Access to your Sigma environment. A Sigma trial environment is acceptable and preferred.</li>
  <li>Some familiarity with Sigma is assumed. Not all steps will be shown as the basics are assumed to be understood.</li>
</ul>

<button>[Sigma Free Trial](https://www.sigmacomputing.com/free-trial/)</button>

### What You’ll Learn
How to apply Metrics in Sigma using Sigma's sample database to build out information based on a Marketing campaign use case.

### What You’ll Build

We will be a simple solution that meets requirements provided by Marketing for active campaign status.

<img src="assets/m20.png" width="800"/>

![Footer](assets/sigma_footer.png)
<!-- END OF OVERVIEW -->

## **About Sigma Metrics**
Duration: 5

Metrics in Sigma are custom aggregate calculations that can be reused across workbook data elements that share a data source (i.e., dataset or connection table). 

They can be as simple or complex as required by the use case. The person creating Sigma content does not need to know the details of the metric to use them in their Workbook and by using an approved metric, they will accelerate their workflow. 

Metrics are defined at the data source level to promote consistent metric logic across elements and help users perform standard calculations with ease and efficiency.

There are some basic rules for creating Metrics:

**For Datasets:**
 <ul>
      <li><strong></strong> You must be assigned an account type with the Edit Dataset permission enabled.</li>
      <li><strong></strong> You must be the dataset owner or be granted Can Edit dataset permission..</li>
</ul>

**For Connection Tables:**
 <ul>
      <li><strong></strong> You must be assigned the Admin account type.</li>
</ul>

![Footer](assets/sigma_footer.png)
<!-- END OF SECTION-->

## **Use Case Details**
Duration: 10

Marketing has requested details on how well the various Salesforce campaigns are performing. 

***They want specifics on active campaigns to make sure they are staying on budget:***

 <li><strong></strong>
    <ol type="n"> 
      <li>How many leads are coming in for each campaign.</li>
      <li>The total cost (spend) per campaign.</li>
      <li>How much pipeline was generated.</li>
      <li>Value of closed pipeline.</li>
      <li>Which campaigns of over on their budget.</li>
    </ol>
  </li>

They also want the the ability to drill down into the data to get to the lowest level available. They also want to create some visuals (TBD), using the same data on their own. 

Now that we know what the requirements are, let's create a reusable set of data that leverages metrics so that any future use of the data includes the approved (governed) calculations.

![Footer](assets/sigma_footer.png)
<!-- END OF SECTION -->

## **Create a Dataset**
Duration: 10

Login into Sigma and click `+ Create New` and select `Dataset`.

<img src="assets/m1.png" width="300"/>

On the `Select a Data Source` page, select `Table`.

We will be using the Salesforce data in our cloud data warehouse, as shown:

<img src="assets/m2.png" width="800"/>

Click `Get Started`.

***Recall that Marketing only wants to see active campaigns.***

Click the `Worksheet` tab.

Select the column `Is Active` and click it's menu. Select `Filter`:

<img src="assets/m17.png" width="800"/>

We want to **exclude** anything that is not "Active" or `true`:

<img src="assets/m18.png" width="400"/>

Click `Save`.

This will also serve to reduce the amount of data returned since it is not required in this use case. 

We are now presented with the unpublished Dataset and we can add some metrics.

![Footer](assets/sigma_footer.png)
<!-- END OF SECTION -->

## **Create Metrics**
Duration: 10

Click the `Metrics` tab and click `Add Metric`:

<img src="assets/m3.png" width="600"/>

Adding new Metrics is very simple. All that is required is to provide a name and formula. The description can be very useful, but it is optional. 

<aside class="negative">
<strong>NOTE:</strong><br> For formulas to work, they must be against valid table column names and use valid functions. It can be useful to test them on a separate Workbook prior to creating the final metric. 
</aside>

For this new metric, use:
```
NAME:             FORMULA:
Leads by Type     Sum([Number of Leads])
```

Notice that you can also set the default formatting for the Metric. This saves steps for the users later.

<img src="assets/m4.png" width="350"/>

The metric is saved as soon as you create it. 

Click the `All Metrics` link to see a list of all available metrics in this Dataset:

<img src="assets/m5.png" width="350"/>

From this list you are also able to modify or delete any Metric.

Now create a few more metrics so that we can build our use case out:

```
NAME:                 FORMAT:        FORMULA:
Pipeline Generated    Currency       Sum([Amount All Opportunities])
Total Closed Won      Currency       Sum([Amount Won Opportunities])
Budget Allocated      Currency       Sum([Budgeted Cost])
Actual $ Spend        Currency       Sum([Actual Cost])
Attributed Margin     Currency       Sum([Amount Won Opportunities] - [Actual Cost])
Under-Over Budget     Automatic      If(Sum([Actual Cost]) / Sum([Budgeted Cost]) >= 1, "Over Budget", "Under Budget")
```

Most of the metrics used are simple enough but as you can see with the `Under-Over Budget` formula, you can get as complex as needed and use any of the available Functions.

[Click here to see the available functions in Sigma](https://help.sigmacomputing.com/hc/en-us/categories/360002442993-Function-Index)

If you have not already done so, name the Dataset `Sales Campaign Dataset` and `Publish` it.

Now that we have a Dataset with some Metrics, let's build content.

![Footer](assets/sigma_footer.png)
<!-- END OF SECTION -->

## Using Metrics in a Workbook
Duration: 15

From the `Sales Campaign Dataset`, click the `Explore` button in the upper right corner of the page header. 

Group the table by `Type`.

Now lets add some columns but instead of having to do it manually and sort out the correct calculations, we will just use the bre-built ones provided by Metrics.

In the `Element Panel`, click the `Metrics` tab.

Drag each Metric to the `Calculations` under the `Grouping` for `Type` in the order in which you want the columns appear:

<img src="assets/m11.png" width="800"/>

Lets also make the campaigns that are over budget stand out while we are here:

For the column `Under-Over Budget` click the menu icon and select `Conditional formatting`:

<img src="assets/m12.png" width="400"/>

Configure it so that cells with "Over Budget" will appear red in the column cell:

<img src="assets/m13.png" width="400"/>

<aside class="negative">
<strong>NOTE:</strong><br> We just added seven new calculated columns in seconds, knowing that the formulas were from a pre-approved source. A huge time saver for the business user and will also prevent possible issues down the road if someone were to create their own calculation that was incorrect. 
</aside>

Now that we have a table using trusted calculations, we can leverage it into a Vizualization to make easy to see campaign spend to date:

We simply create a `Child Element` / `Vizualization` from the table:

<img src="assets/m15.png" width="700"/>

and configure a bar chart as:

<img src="assets/m14.png" width="800"/>

We also enabled data labels to display the value on top of each bar:

<img src="assets/m16.png" width="600"/>

Rename the chart to `Active Campaign Spend - Budget vs Actual`.

Publish your Workbook and see the final results by navigating to the `Published Version`:

<img src="assets/m19.png" width="600"/>

Now Marketing has all the information they requested and can use Sigma's `Drill Anywhere` feature to get to the lowest level of data to explore as they see fit without having us pre-define the drill-path.

<img src="assets/m20.png" width="800"/>

[For more information on Metrics click here.](https://help.sigmacomputing.com/hc/en-us/articles/14427670985363-Create-and-Manage-Metrics-Beta-)


![Footer](assets/sigma_footer.png)
<!-- END OF SECTION -->

## What we've covered
Duration: 5

In this lab we learned how to create and manage Metrics in Sigma.

<img src="assets/m20.png" width="800"/>

<!-- THE FOLLOWING ADDITIONAL RESOURCES IS REQUIRED AS IS FOR ALL QUICKSTARTS -->
**Additional Resource Links**

[Help Center Home](https://help.sigmacomputing.com/hc/en-us)<br>
[Sigma Community](https://community.sigmacomputing.com/)<br>
[Sigma Blog](https://www.sigmacomputing.com/blog/)<br>
<br>

[<img src="./assets/twitter.jpeg" width="75"/>](https://twitter.com/sigmacomputing)&emsp;
[<img src="./assets/linkedin.png" width="75"/>](https://www.linkedin.com/company/sigmacomputing)
[<img src="./assets/facebook.png" width="75"/>](https://www.facebook.com/sigmacomputing)

![Footer](assets/sigma_footer.png)
<!-- END OF WHAT WE COVERED -->
<!-- END OF QUICKSTART -->
